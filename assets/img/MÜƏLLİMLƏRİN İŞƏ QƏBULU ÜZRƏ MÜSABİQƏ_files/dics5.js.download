var dics = {

    drpBolme_onchange : function()
    {
        var bolme_id=$("#drpBolme").val();
        reg.VACANCY_FIRST_LOAD=false;
      //  reg.delete_all_vacs();
       // showobj("btnNovbetiMM",false);
       // showobj("btnWaitMM",true);
        EnableControl("drpBolme",false);

        dics.rdSubject_Status();

        reg.waiting_buttons(true);

        $.post("drp_load", { lang_id: bolme_id , ajax: "yes", drpLoad:"drpSubjects" },
          function(data){

              reg.waiting_buttons(false);
              //  showobj("btnNovbetiMM",true);
             //   showobj("btnWaitMM",false);
                EnableControl("drpBolme",true);
                $("#sp-lblFenn").html(data);

                if(reg.BUTTON_SAVE_MM_CLICKED) reg_vals.check_mm();

              //  if(querySt("id")!="-1")
               // $("#drpFen").val(edit_fenn_id);
         });
    } ,
    drpMStajIl_onchange: function ()
    {
      if($('#drpMStajIl').val() != '0') {
          $('.drpRayon_div').show();
          $('.drpMekteb_div').show();
      } else {
          $('.drpRayon_div').hide();
          $('.drpMekteb_div').hide();
      }
    },
    drpRayon_onchange : function()
    {
        var rayon_id=$("#drpRayon").val();

        //showobj("btnNovbetiMM",false);
        //showobj("btnWaitMM",true);
        reg.waiting_buttons(true);
        EnableControl("drpRayon",false);
        $.post("drp_load", { rayon_id: rayon_id , ajax: "yes", drpLoad:"drpMektebler" },
          function(data){
                reg.waiting_buttons(false);
                showobj("btnNovbetiMM",true);
                showobj("btnWaitMM",false);
                EnableControl("drpRayon",true);
                $("#sp-lblMekteb").html(data);

                if(reg.BUTTON_SAVE_MM_CLICKED) reg_vals.check_mm();
              //  if(querySt("id")!="-1")
               // $("#drpFen").val(edit_fenn_id);
         });
    },
    drpRayon1_onchange : function()
    {
        var rayon_id=$("#drpRayon1").val();
        reg.waiting_buttons(true);
        EnableControl("drpRayon",false);
        $.post("drp_load", { rayon_id: rayon_id , ajax: "yes", drpLoad:"drpMektebler" },
            function(data){
                reg.waiting_buttons(false);
                showobj("btnNovbetiMM",true);
                showobj("btnWaitMM",false);
                EnableControl("drpRayon",true);
                $("#sp-lblMekteb1").html(data);

                if(reg.BUTTON_SAVE_MM_CLICKED) reg_vals.check_mm();
                //  if(querySt("id")!="-1")
                // $("#drpFen").val(edit_fenn_id);
            });
    },

    drpFenn_OnChange : function()
    {

        reg.VACANCY_FIRST_LOAD=false;
        reg.delete_all_vacs();

        dics.rdSubject_Status();
        // if($('#drpFenn').val() == '26') {
        //     $('.drpRayon_div').show();
        //     //$('.drpMekteb_div').show();
        //     $('.drpMektebDiger_div').hide();
        // } else if($('#drpFenn').val() == '25') {
        //     $('.drpRayon_div').show();
        //     $('.drpMektebDiger_div').show();
        //     //$('.drpMekteb_div').hide();
        //
        // } else {
        //     $('.drpRayon_div').hide();
        //     //$('.drpMekteb_div').hide();
        //     $('.drpMektebDiger_div').hide();
        // }
    },

   rdSubject_Status : function()
   {
       /*
       var bolme_id = $("#drpBolme").val();
       var fenn_id = $("#drpFenn").val();

       for(var i=1;i<=$("#hdnTPoint").val();i++)
       {
           var mybolme_id = $("#hdnB_"+i).val();
           var myfenn_id = $("#hdnF_"+i).val();

           if(bolme_id==mybolme_id && fenn_id==myfenn_id)
           {
               $("#rdIshtirak2").removeAttr("disabled","disabled");

           }
           else
           {
               $("#rdIshtirak2").attr("disabled","disabled");
               $("#rdIshtirak2").removeAttr("checked");
               $("#rdIshtirak1").prop("checked",true);
           }
       }
       */
       //if(bolme_id==)
   } ,

   drpMusNov_OnChange : function()
   {
	console.log("change 1");
       if($("input[name='drpMusNov']:checked").val()=="3")
       {
           $("#divEmekKitab").show();
       }
       else
       {
           $("#divEmekKitab").hide();
       }

       dics.load_points()
   },

    visual_impairment_OnChange : function()
    {
        if($("#visual_impairment").val()=="1") {
            $("#div_visual_impairment").show();
        } else {
            $("#div_visual_impairment").hide();
        }
    },

   rdPSelect_OnClick : function(selected_point_id)
   {
      var point_type = $("input[name='drpMusNov']:checked").val();

      $("#divPointAdd").hide();

      if(point_type=="3")
      {
        $("#divMiq36").hide();

        if(parseFloat($("#hdnBAL_"+selected_point_id).val())<36)
        {
             $("#divMiq36").show();
        }
      }
   },

   rdPSelect_1000 : function(selected_point_id)
   {
       $("#divPointAdd").show();
   },

   drpBolmeDQ_OnChange:function()
   {
       $("#drpFennDQ").val("");
       dics.add_remove_dq_subjects();
   },

   drpFennDQ_OnChange:function()
   {
       dics.add_remove_dq_subjects();
   },
   add_remove_dq_subjects : function()
   {
        var hdnTPoint = $("#hdnTPoint").val();

        var drpBolmeID=$("#drpBolmeDQ").val();
        var drpFennID=$("#drpFennDQ").val();

        $("#drpFennDQ option").each(function(i){
             $(this).prop('disabled',false);
             $(this).css('font-style', '');
             $(this).css('color', '');
        });

       if(drpBolmeID == 1) {
           $('#drpFennDQ option[value="24"]').prop('disabled', true);
           $('#drpFennDQ option[value="24"]').css('color', '#b8bab0');
           $('#drpFennDQ option[value="24"]').css('font-style', 'italic');

           $('#drpFennDQ option[value="16"]').prop('disabled', true);
           $('#drpFennDQ option[value="16"]').css('color', '#b8bab0');
           $('#drpFennDQ option[value="16"]').css('font-style', 'italic');
       }

       if(drpBolmeID == 2) {
           $('#drpFennDQ option[value="2"]').prop('disabled', true);
           $('#drpFennDQ option[value="2"]').css('color', '#b8bab0');
           $('#drpFennDQ option[value="2"]').css('font-style', 'italic');

           $('#drpFennDQ option[value="15"]').prop('disabled', true);
           $('#drpFennDQ option[value="15"]').css('color', '#b8bab0');
           $('#drpFennDQ option[value="15"]').css('font-style', 'italic');
       }

        //$("#drpFennDQ option").each(function(i){

        //alert($(this).text() + " : " + $(this).val());

            // for(var i=1;i<hdnTPoint;i++)
            // {
            //    var pointid =  $("#rdPSelect-T3-"+i).val()
            //
            //    var bolmeid =$("#hdnB_"+pointid).val();
            //    var fenn_id =$("#hdnF_"+pointid).val();
            //
            //     if(drpBolmeID==bolmeid && fenn_id== $(this).val())
            //     {
            //         $(this).prop('disabled',true);
            //         $(this).css('color', '#b8bab0');
            //         $(this).css('font-style', 'italic');
            //
            //     }
            //
            //
            // }

        //});
   },

   load_points : function()
   {
       var point_type = $("input[name='drpMusNov']:checked").val();
      // var bolme_id=$("#drpBolme").val();
      // var fenn_id=$("#drpFenn").val();
      $("#divMiq36").hide();
      $("#divPointAdd").hide();
      if(point_type=="2")
      {
          $("#lblPointMsg").html("2018-ci il üzrə imtahan nəticələri");
          $("#divExamRes").show();
          $("#spHide1").hide();
          $("#divPointInfo1").hide();
      }
      else if(point_type=="3")
      {
          $("#lblPointMsg").html("Diaqnostik qiymətləndirilmə üzrə imtahan nəticələri: <br /><i>(Eyni fənn və bölmə üzrə iki və ya daha artıq imtahan nəticəniz olduğu təqdirdə yalnız son iştirak etdiyiniz imtahan nəticəsi ilə müraciət edə bilərsiniz. Seçdiyiniz imtahan nəticəsinə uyğun bölmə və fənn üzrə vakansiya seçimində iştirak edəcəksiniz.)</i>");
          $("#divExamRes").show();
          $("#spHide1").hide();
          $("#divPointInfo1").show();

      }
      else {
          $("#spHide1").show();
          $("#divExamRes").hide();
          $("#divPointInfo1").hide();
      }

       reg.waiting_buttons(true);

        $.post("load_point", {  ajax: "yes", load_point:"yes" , point_type:point_type },
          function(data){
              $("#hdnTPoint").val(data.rescount);
              if(parseInt(data.rescount)==0)
              {
                  $("#sp-lblImt").html('<div class="alert alert-danger">Sizin imtahan nəticələriniz tapılmadı</div>');
              }
              else $("#sp-lblImt").html(data.html);

              if($("input[name='drpMusNov']:checked").val()=="3")
              {
                    $("#drpYearsDQ").val(data.imt_ili);
                    $("#drpFennDQ").val(data.dq_fenn_id);
                    $("#drpBolmeDQ").val(data.dq_bolme_id);
                    $("#drpBalDQ").val(data.dq_bal);

                    if(data.dq_fenn_id!="" && reg.get_point_id($("input[name='drpMusNov']:checked").val())<1)
                    {
                        $("#rdPSelect-1000").attr("checked","checked");
                        $("#divPointAdd").show();
                    }
                    if($("#rdPSelect-1000").is(':checked'))
                    {
                        $("#divPointAdd").show();
                    }
                    dics.add_remove_dq_subjects();
              }
              else if($("input[name='drpMusNov']:checked").val()=="2")
              {
                  if(parseInt(data.rescount)>0)
                  {
                      if(parseFloat($("#hdnBALT_2018").val())<36)
                      {
                        $("#divMiq36").show();
                      }
                  }
              }
              reg.waiting_buttons(false);

         },"json");
   }

}


dics.visual_impairment_OnChange();
